(()=>{"use strict";var e,t={966:()=>{const e=window.React,t=window.wp.i18n,a=window.wp.element,l=window.wp.blockEditor,o=(window.wp.formatLibrary,window.wp.components),n=window.wp.blocks,c=window.wp.data,r=[["core/paragraph",{placeholder:(0,t.__)("Add body contentâ€¦","global360blocks")}]],s=["core/paragraph","core/list","core/heading","core/quote"];(0,n.registerBlockType)("global360blocks/two-column",{edit:({attributes:i,setAttributes:m,clientId:d})=>{const{imageUrl:p,imageId:g,heading:b,bodyText:u}=i,w=(0,c.useSelect)(e=>e("core/block-editor").getBlocks(d),[d]),h=w.length>0,{replaceInnerBlocks:k}=(0,c.useDispatch)("core/block-editor");(0,a.useEffect)(()=>{if(!h&&u){const e=(0,n.rawHandler)({HTML:u});let t=e.length?e:[(0,n.createBlock)("core/paragraph",{content:u})];if(e.length>1&&e.every(e=>"core/paragraph"===e?.name&&"string"==typeof e?.attributes?.content)){const a=e.map(e=>e.attributes.content.trim()).filter(Boolean).join("<br />");a&&(t=[(0,n.createBlock)("core/paragraph",{content:a})])}k(d,t,!1),m({bodyText:""})}},[h,u,k,d,m]),(0,a.useEffect)(()=>{if(!w.length)return;let e=!1;const t=[],a=(b||"").trim();w.forEach(l=>{if(s.includes(l.name)){if("core/paragraph"===l.name){const a=l.attributes?.content||"";let o=a.replace(/<img[^>]*>/gi,"");o=o.replace(/Replace\s*Image\s*Remove\s*Image/gi,""),o=o.replace(/Replace\s*Image/gi,""),o=o.replace(/Remove\s*Image/gi,"");const c=o.replace(/&nbsp;/gi," ").replace(/<br\s*\/?>/gi,"\n").replace(/\s+/g," ").trim();return"take risk assessment now"===c.toLowerCase()||"body content"===c.toLowerCase()?void(e=!0):(o=o.trim(),o?void(o!==a?(t.push((0,n.cloneBlock)(l,{...l.attributes,content:o})),e=!0):t.push(l)):void(e=!0))}if("core/heading"===l.name){const o=(l.attributes?.content||"").trim();return a&&o===a?void(e=!0):void t.push(l)}t.push(l)}else e=!0}),e&&k(d,t,!1)},[w,k,d,b]);const v=()=>{m({imageUrl:"",imageId:0})},f=(0,l.useBlockProps)({className:"two-column-block"});return(0,e.createElement)("div",{...f},(0,e.createElement)("div",{className:"two-column-container"},(0,e.createElement)("div",{className:"two-column-image"},p?(0,e.createElement)("img",{src:p,alt:"",className:"column-image"}):(0,e.createElement)("div",{className:"image-placeholder"},(0,e.createElement)("span",null,(0,t.__)("Image will appear here","global360blocks"))),(0,e.createElement)("div",{className:"image-controls"},(0,e.createElement)(l.MediaUploadCheck,null,(0,e.createElement)(l.MediaUpload,{onSelect:e=>{m({imageUrl:e.url,imageId:e.id})},allowedTypes:["image"],value:g,render:({open:a})=>(0,e.createElement)("div",{className:"upload-controls"},!p&&(0,e.createElement)(o.Button,{className:"button button-large",onClick:a},(0,t.__)("Upload Image","global360blocks")),p&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.Button,{className:"button",onClick:a},(0,t.__)("Replace Image","global360blocks")),(0,e.createElement)(o.Button,{className:"button",onClick:v},(0,t.__)("Remove Image","global360blocks"))))})))),(0,e.createElement)("div",{className:"two-column-content"},(0,e.createElement)(l.RichText,{identifier:"heading",tagName:"h2",className:"two-column-heading",value:b,onChange:e=>m({heading:e}),placeholder:(0,t.__)("Enter heading...","global360blocks"),allowedFormats:["core/bold","core/italic"]}),(0,e.createElement)("div",{className:"two-column-body-field"},(0,e.createElement)("span",{className:"two-column-field-label"},(0,t.__)("Body content","global360blocks")),(0,e.createElement)("div",{className:"two-column-body"},(0,e.createElement)(l.InnerBlocks,{allowedBlocks:s,template:r,templateLock:!1}))),(0,e.createElement)("div",{className:"two-column-button-preview"},(0,e.createElement)("span",{className:"btn btn_global"},(0,t.__)("Take Risk Assessment Now","global360blocks"))))))},save:()=>null})}},a={};function l(e){var o=a[e];if(void 0!==o)return o.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,l),n.exports}l.m=t,e=[],l.O=(t,a,o,n)=>{if(!a){var c=1/0;for(m=0;m<e.length;m++){for(var[a,o,n]=e[m],r=!0,s=0;s<a.length;s++)(!1&n||c>=n)&&Object.keys(l.O).every(e=>l.O[e](a[s]))?a.splice(s--,1):(r=!1,n<c&&(c=n));if(r){e.splice(m--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[a,o,n]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var o,n,[c,r,s]=a,i=0;if(c.some(t=>0!==e[t])){for(o in r)l.o(r,o)&&(l.m[o]=r[o]);if(s)var m=s(l)}for(t&&t(a);i<c.length;i++)n=c[i],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(m)},a=globalThis.webpackChunk_360_global_blocks=globalThis.webpackChunk_360_global_blocks||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=l.O(void 0,[350],()=>l(966));o=l.O(o)})();